- id: A001
  alias: Ytterdorr open notify
  initial_state: false
  trigger:
    platform: state
    entity_id: binary_sensor.fibaro_system_fgbs001_universal_binary_sensor_sensor_2
    from: 'off'
    to: 'on'
  action:
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Ytterdorr opened'
- id: A003
  alias: Vardrum sofflampa on when white remote no 1 is pressed
  trigger:
  - platform: state
    entity_id: switch.white_remote_1
  action:
  - data:
      entity_id: light.livingroom_sofa
    service: homeassistant.toggle
  mode: single
- id: A004
  alias: Vardrum hornlampa on when white remote no 3 is pressed
  trigger:
  - platform: state
    entity_id: switch.white_remote_3
  action:
  - service: homeassistant.toggle
    data:
      entity_id: light.living_room_corner
  mode: single
- id: A007
  alias: 0 - All lights off when night
  trigger:
  - at: input_datetime.good_night
    platform: time
  condition:
  - condition: state
    entity_id: input_boolean.cancel_next_goodnight
    state: 'off'
  - condition: state
    entity_id: media_player.samsung_tv
    state: 'off'
  action:
  - entity_id: scene.godnatt
    service: scene.turn_on
  mode: single
- id: A008
  alias: 0 - Some lights off at sunrise
  trigger:
  - platform: sun
    event: sunrise
  action:
  - type: turn_off
    device_id: 41391f4613e811eb9646f5c29c4a5405
    entity_id: light.front_door
    domain: light
  - service: homeassistant.turn_off
    entity_id: group.daily_sun
  mode: single
- id: A009
  alias: 0 - Some lights on before sunset
  trigger:
    platform: sun
    event: sunset
    offset: -00:45:00
  action:
  - service: homeassistant.turn_on
    entity_id: group.daily_sun
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Daily sunset triggered'
- id: A012
  alias: Alarm activation
  trigger:
  - platform: state
    entity_id: binary_sensor.fibaro_system_fgbs001_universal_binary_sensor_sensor
    from: 'on'
    to: 'off'
  action:
  - service: notify.pelles_tfn
    data:
      message: '{{ states("sensor.time") }} - Palarmning'
  - service: scene.turn_on
    entity_id: scene.alarm_on
  - service: alarm_control_panel.alarm_arm_away
    data: {}
    entity_id: alarm_control_panel.aarlo_arlozone
  mode: single
- id: A013
  alias: Alarm deactivation
  trigger:
  - platform: state
    entity_id: binary_sensor.fibaro_system_fgbs001_universal_binary_sensor_sensor
    from: 'off'
    to: 'on'
  action:
  - service: notify.pelles_tfn
    data:
      message: '{{ states("sensor.time") }} -  Avlarmning'
  - service: scene.turn_on
    entity_id: scene.alarm_off
  - service: alarm_control_panel.alarm_arm_home
    data: {}
    entity_id: alarm_control_panel.aarlo_arlozone
  mode: single
- id: A014
  alias: Flood alarm message
  trigger:
  - platform: state
    entity_id: binary_sensor.dishwasher_flood_template
    from: 'off'
    to: 'on'
  action:
  - service: notify.pelle_twilio_sms
    data:
      message: '{{ states("sensor.time") }} - Oversvammningslarm'
      target:
      - 46735587416
  - service: notify.pelle_twilio_call
    data:
      message: Flood alarm. Flood alarm. Flood alarm.
      target:
      - 46735587416
  mode: single
- id: A015
  alias: Smoke alarm message
  trigger:
    platform: state
    entity_id: binary_sensor.fibaro_system_fgsd002_smoke_sensor_sensor_27_0
    from: 'off'
    to: 'on'
  action:
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Roklarm Roklarm'
- id: A016
  alias: 0 - Some lights on when Pelle gets home in the afternoon
  trigger:
  - entity_id: device_tracker.life360_per_nordlund
    from: not_home
    platform: state
    to: home
  condition:
  - after: '14:00'
    before: '21:00'
    condition: time
  action:
  - data:
      entity_id: group.lights_pelle
    service: homeassistant.turn_on
  mode: single
- id: A017
  alias: X - Send bus schedule when Pelle leaves
  initial_state: false
  trigger:
    platform: state
    entity_id: device_tracker.pelle_gps
    from: home
    to: not_home
  condition:
    condition: time
    after: 05:00
    before: '10:00'
  action:
    service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.slussen") }}'
- id: A019
  alias: Arbrum fonsterlampa from wall
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      node_id: 10
      scene_id: 24
  action:
  - service: homeassistant.toggle
    entity_id: light.guest_room_window_2
- id: A021
  alias: Arbrum fonsterlampa med 2-klick
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      node_id: 10
      scene_id: 26
  action:
  - service: homeassistant.toggle
    entity_id: light.guest_room_window_2
- id: A022
  alias: Vardrum hornlampan med 3-klick
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      node_id: 12
      scene_id: 14
  action:
  - service: homeassistant.toggle
    entity_id: switch.telldus_tzwp_100_plug_in_switch_switch
- id: A024
  alias: X - Notify Pelle to work
  initial_state: false
  trigger:
    platform: state
    entity_id: device_tracker.pelle_gps
    to: work
  action:
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Pelle got to work'
- id: A025
  alias: Badrum on when motion timer
  trigger:
  - platform: state
    to: 'on'
    entity_id: binary_sensor.upstairs_bathroom_motion
  condition:
  - condition: device
    type: is_off
    device_id: c2d030f4d6f8491286e88808301e1a69
    entity_id: switch.bathroom_ceiling
    domain: switch
    for:
      hours: 0
      minutes: 0
      seconds: 10
  action:
  - service: homeassistant.turn_on
    entity_id: switch.bathroom_ceiling
  mode: single
- id: A026
  alias: Badrum auto off timer
  trigger:
  - platform: state
    entity_id: switch.bathroom_ceiling
    to: 'on'
  condition:
  - condition: state
    entity_id: light.sauna
    state: 'off'
  action:
  - service: homeassistant.turn_on
    entity_id: script.timed_badrum
  mode: single
- id: A027
  alias: White remote 2:ALL triggered Godnatt
  trigger:
  - platform: event
    event_type: rfxtrx_event
    event_data:
      id_string: 0533a9e:1
      values:
        Command: Group off
  action:
  - scene: scene.godnatt
  - service: homeassistant.turn_off
    data: {}
    entity_id: media_player.samsung_tv
  mode: single
- id: A0271
  alias: White remote 1:ALL triggered notify Pelle
  trigger:
  - platform: event
    event_type: rfxtrx_event
    event_data:
      id_string: 0a5b3f2:1
      values:
        Command: Group off
  action:
  - service: notify.pelles_tfn
    data:
      message: Testing WR1/All
  mode: single
- id: A028
  alias: Klk off 5 min after on
  trigger:
    platform: state
    entity_id: switch.cloak_room_ceiling
    to: 'on'
  action:
    service: homeassistant.turn_on
    entity_id: script.timed_klk
- id: A030
  alias: MQTT toggle
  trigger:
    platform: mqtt
    topic: hass/toggle_lamp
  action:
  - service: homeassistant.toggle
    data_template:
      entity_id: '{{ trigger.payload.split("\"")[3] }}'
- id: A031
  alias: Roger start
  trigger:
    platform: state
    entity_id: input_select.roger_action
    to: start
  action:
  - service: rest_command.roger_start
- id: A032
  alias: Roger park
  trigger:
    platform: state
    entity_id: input_select.roger_action
    to: park
  action:
  - service: rest_command.roger_park
- id: A033
  alias: Roger stop
  trigger:
    platform: state
    entity_id: input_select.roger_action
    to: stop
  action:
  - service: rest_command.roger_stop
- id: A035
  alias: Arbrum fonsterlampa med long-klick
  trigger:
    platform: event
    event_type: zwave.scene_activated
    event_data:
      node_id: 10
      scene_id: 25
  action:
  - service: homeassistant.toggle
    entity_id: light.guest_room_window_2
- id: A036
  alias: X - Log Pelle to work
  trigger:
    platform: state
    entity_id: device_tracker.pelle_gps
    to: OKQ8
  action:
  - service: shell_command.log_to_okq8
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Logged to OKQ8 - GPS'
  - service: notify.work_log
    data_template:
      message: '{{ states("sensor.time") }} - Logged to OKQ8 - GPS'
- id: A037
  alias: X - Log Pelle leave work
  trigger:
    platform: state
    entity_id: device_tracker.pelle_gps
    from: OKQ8
  action:
  - service: shell_command.log_leave_okq8
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Logged leaving OKQ8 - GPS'
  - service: notify.work_log
    data_template:
      message: '{{ states("sensor.time") }} - Logged leave OKQ8 - GPS'
- id: A040
  alias: Daily python scripts midnight
  initial_state: false
  trigger:
    platform: state
    entity_id: sensor.date
  action:
  - service: python_script.turn_on
    data:
      entity_id: daily_midnight
- id: A041
  alias: Daily scripts midnight
  initial_state: false
  trigger:
    platform: state
    entity_id: sensor.date
  action:
  - service: script.turn_on
    data:
      entity_id: script.daily_midnight
- id: A042
  alias: Entre on when door opens late night
  trigger:
  - entity_id: binary_sensor.fibaro_system_fgbs001_universal_binary_sensor_sensor_2
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - after: '22:00'
    before: 04:00
    condition: time
  - condition: state
    entity_id: light.entrance_drawer
    state: 'off'
  action:
  - entity_id: light.entrance_drawer
    service: light.turn_on
  - delay: 00:10:00
  - entity_id: light.entrance_drawer
    service: light.turn_off
- id: A043
  alias: Marie leaving Slussen
  trigger:
  - platform: state
    entity_id: device_tracker.life360_marie
    from: Slussen
  action:
  - service: notify.pelles_tfn
    data:
      message: '{{ states("sensor.time") }} - Marie left Slussen'
  mode: single
- id: A044
  alias: X - Log Pelle to work - Life
  trigger:
  - entity_id: device_tracker.life360_per_nordlund
    platform: state
    to: OKQ8
  action:
  - service: shell_command.log_to_okq8
  - data: {}
    data_template:
      message: '{{ states("sensor.time") }} - Logged to OKQ8 - Life'
    service: notify.work_log
  - data_template:
      message: '{{ states("sensor.time") }} - Logged to OKQ8 - Life'
    service: notify.pelles_tfn
- id: A045
  alias: X - Log Pelle leave work - Life
  trigger:
  - entity_id: device_tracker.life360_per_nordlund
    from: OKQ8
    platform: state
  action:
  - service: shell_command.log_leave_okq8
  - data_template:
      message: '{{ states("sensor.time") }} - Logged leave OKQ8 - Life'
    service: notify.work_log
  - data_template:
      message: '{{ states("sensor.time") }} - Logged leave OKQ8 - Life'
    service: notify.pelles_tfn
- id: A046
  alias: Garage light on when door opens
  trigger:
  - entity_id: binary_sensor.fibaro_system_fgk101_door_opening_sensor_sensor_2
    platform: state
    to: 'on'
  action:
  - data:
      entity_id: switch.popp_duwi_zw_zsa_3500_plugin_switch_switch
    service: homeassistant.turn_on
- id: A047
  alias: Garage light off when door closes
  trigger:
  - entity_id: binary_sensor.fibaro_system_fgk101_door_opening_sensor_sensor_2
    platform: state
    to: 'off'
  action:
  - data:
      entity_id: switch.popp_duwi_zw_zsa_3500_plugin_switch_switch
    service: homeassistant.turn_off
- id: A0471
  alias: X - Log Jenny leaving home - Life
  trigger:
    platform: state
    entity_id: device_tracker.jenny_jenny
    from: home
  action:
  - service: notify.jenny_log
    data_template:
      message: '{{ states("sensor.time") }} - Jenny left home - Life'
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Jenny left home - Life'
- id: A048
  alias: X - Log Jenny leaving home - WLAN
  trigger:
    platform: state
    entity_id: device_tracker.jenny
    from: home
  action:
  - service: notify.jenny_log
    data_template:
      message: '{{ states("sensor.time") }} - Jenny left home - WLAN'
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Jenny left home - WLAN'
- id: A049
  alias: Ytterdorr open turn on byra
  trigger:
  - entity_id: binary_sensor.fibaro_system_fgbs001_universal_binary_sensor_sensor_2
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - after: '23:00'
    before: 05:00
    condition: time
  - condition: state
    entity_id: light.entrance_drawer
    state: 'off'
  action:
  - data:
      entity_id: light.entrance_drawer
    entity_id: light.entrance_drawer
    service: light.turn_on
  - delay: 00:10:00
  - data:
      entity_id: light.entrance_drawer
    service: light.turn_off
- id: '1544037641675'
  alias: Arbrum on motion
  trigger:
  - entity_id: binary_sensor.guest_room_motion
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: timer.arbrum_motion
    state: idle
  - after: '14:00'
    before: '22:00'
    condition: time
  action:
  - data:
      entity_id: light.guest_room_desk
    service: homeassistant.turn_on
  - data:
      entity_id: timer.arbrum_motion
    service: timer.start
  - data:
      entity_id: light.guest_room_window_2
    service: homeassistant.turn_on
- id: '1544045540211'
  alias: XX-test-timer-arbrum
  initial_state: false
  trigger:
  - event_data:
      entity_id: timer.arbrum_motion
    event_type: timer.finished
    platform: event
  condition: []
  action:
  - data:
      message: No motion in arbrum
    service: notify.pelles_tfn
- id: '1550438266481'
  alias: Allrum on when dark
  trigger:
  - below: 6
    entity_id: sensor.fibaro_system_fgms001_zw5_motion_sensor_luminance
    platform: numeric_state
  - entity_id: binary_sensor.fibaro_system_fgms001_zw5_motion_sensor_sensor
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - after: '15:00'
    before: '22:00'
    condition: time
  action:
  - data:
      entity_id: light.play_room_ceiling
    service: light.turn_on
- id: '1554619393049'
  alias: Test Google Pub/Sub
  trigger:
  - platform: webhook
    webhook_id: google-pub-sub
  condition: []
  action:
  - data:
      message: Webhook triggered
    service: notify.pelles_tfn
- id: '1569174049492'
  alias: Flower lights on
  trigger:
  - at: input_datetime.flower_lights_on_1
    platform: time
  - at: input_datetime.flower_lights_on_2
    platform: time
  condition: []
  action:
  - data:
      entity_id: switch.flower_lights
    service: homeassistant.turn_on
  mode: single
- id: '1569174104818'
  alias: Flower lights off
  trigger:
  - at: input_datetime.flower_lights_off_1
    platform: time
  - at: input_datetime.flower_lights_off_2
    platform: time
  condition: []
  action:
  - data:
      entity_id: switch.flower_lights
    service: homeassistant.turn_off
  mode: single
- id: '1575216792330'
  alias: Kitchen table when drawer on
  description: ''
  trigger:
  - entity_id: light.entrance_drawer
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - after: input_datetime.start_kitchen_table_extra
    before: input_datetime.stop_kitchen_table_extra
    condition: time
  action:
  - data:
      entity_id: light.kitchen_table
    service: homeassistant.turn_on
  mode: single
- id: '1575216792331'
  alias: Kitchen table when drawer off
  description: ''
  trigger:
  - entity_id: light.entrance_drawer
    from: 'on'
    platform: state
    to: 'off'
  condition:
  - after: input_datetime.start_kitchen_table_extra
    before: input_datetime.stop_kitchen_table_extra
    condition: time
  action:
  - data:
      entity_id: light.kitchen_table
    service: homeassistant.turn_off
  mode: single
- id: '1576364866846'
  alias: Cancel the cancel
  description: ''
  trigger:
  - at: input_datetime.good_night
    platform: time
  condition: []
  action:
  - delay: 00:05:00
  - data:
      entity_id: input_boolean.cancel_next_goodnight
    service: input_boolean.turn_off
  mode: single
- id: '1588022688533'
  alias: Storstugan On
  description: Notify Pelle when Storstugan available
  trigger:
  - entity_id: device_tracker.storstugan
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - service: notify.pelles_tfn
    data_template:
      message: '{{ states("sensor.time") }} - Storstugan now online'
- id: '1590615866019'
  alias: Albin leaves home
  description: ''
  trigger:
  - entity_id: device_tracker.life360_albin_nordlund
    from: home
    platform: state
  condition: []
  action:
  - data: {}
    entity_id: fan.xiaomi_miio_device
    service: fan.turn_off
  - data: {}
    entity_id: light.albins_bed
    service: homeassistant.turn_off
  - service: homeassistant.turn_off
    data: {}
    entity_id: light.shapes_eea3_local
  mode: single
- id: '1590615984329'
  alias: Albin comes home
  description: ''
  trigger:
  - entity_id: device_tracker.life360_albin_nordlund
    platform: state
    to: home
  condition: []
  action:
  - data: {}
    entity_id: fan.xiaomi_miio_device
    service: fan.turn_on
- id: '1600181517063'
  alias: Notify Pelle front door not locked
  description: ''
  trigger:
  - entity_id: binary_sensor.g8441_is_charging
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: lock.id_lock_150_locked
    state: unlocked
  action:
  - data:
      message: Front door not locked
    service: notify.pelles_tfn
- id: '1601619813757'
  alias: Extra good night
  description: ''
  trigger:
  - platform: time
    at: input_datetime.extra_good_night
  condition: []
  action:
  - scene: scene.godnatt
  - service: homeassistant.turn_off
    data: {}
    entity_id: media_player.samsung_tv
  mode: single
- id: '1602220465881'
  alias: Front door refresh
  description: ''
  trigger:
  - platform: state
    entity_id: alert.front_door_open_long
    to: 'on'
    from: idle
  condition: []
  action:
  - service: zwave.refresh_node
    data:
      node_id: 9
  mode: single
- id: '1603043901780'
  alias: Entrance ceiling when White remote 2 button 3
  description: ''
  trigger:
  - platform: state
    entity_id: switch.white_remote2_3
  condition: []
  action:
  - service: light.toggle
    data: {}
    entity_id: light.entrance_ceiling
  mode: single
- id: '1603044157890'
  alias: Porch Ball when white remote 2 button 2
  description: ''
  trigger:
  - platform: state
    entity_id: switch.white_remote2_2
  condition: []
  action:
  - service: switch.toggle
    data: {}
    entity_id: switch.arc_b8
  mode: single
- id: '1603044225348'
  alias: Tree when white remote 2 button 1
  description: ''
  trigger:
  - platform: state
    entity_id: switch.white_remote2_1
  condition: []
  action:
  - service: switch.toggle
    data: {}
    entity_id: switch.arc_b1
  mode: single
- id: '1603458841523'
  alias: Marie starts moving
  description: ''
  trigger:
  - platform: state
    entity_id: device_tracker.life360_marie
    to: moving
  condition: []
  action:
  - service: notify.pelles_tfn
    data:
      message: '{{ states("sensor.time") }} - Marie on the move'
  mode: single
- id: '1604272064775'
  alias: Bathroom timer start
  description: ''
  trigger:
  - platform: state
    entity_id: light.bathroom_ceiling
    to: 'on'
  condition: []
  action:
  - service: timer.start
    data_template:
      entity_id: timer.bathroom_timer
      duration: 00:{{ states.input_number.badrum_timer.state | int }}:00
  mode: single
- id: '1606658581370'
  alias: Bathroom timer end
  description: ''
  trigger:
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.bathroom_timer
  condition:
  - condition: state
    entity_id: light.sauna
    state: 'off'
  action:
  - service: light.turn_off
    data: {}
    entity_id: light.bathroom_ceiling
  mode: single
- id: '1606659412579'
  alias: Cloakroom timer start
  description: ''
  trigger:
  - platform: state
    entity_id: light.cloak_room
    to: 'on'
  condition: []
  action:
  - service: timer.start
    data_template:
      entity_id: timer.cloakroom_timer
      duration: 00:{{ states.input_number.klk_timer.state | int }}:00
  mode: single
- id: '1606659604638'
  alias: Cloakroom timer end
  description: ''
  trigger:
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.cloakroom_timer
  condition: []
  action:
  - service: light.turn_off
    data: {}
    entity_id: light.cloak_room
  mode: single
- id: '1608909453602'
  alias: Guest room desk when Lenovo off
  description: ''
  trigger:
  - platform: state
    entity_id: device_tracker.20j1_lr09d73d_lan
    to: not_home
  condition: []
  action:
  - service: homeassistant.turn_off
    data:
      entity_id: light.guest_room_desk
  mode: single
